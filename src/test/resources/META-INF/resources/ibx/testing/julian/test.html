<!DOCTYPE html>
<html lang="en">
	<head>
		<title>HTML Test File</title>
		<meta http-equiv="X-UA-Compatible" content="IE=11">
		<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
		<meta http-equiv="Pragma" content="no-cache" />
		<meta http-equiv="Expires" content="0" />
		<meta name="google" value="notranslate">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script type="text/javascript">
			$(function()
			{
				$(".btn-move").on("click", function(e)
				{
					var selectMulti = $(".select-multi");
					var selectSingle = $(".select-single");
					var selItems = selectMulti.val();
					var inOrder = $(".btn-in-order").prop("checked");

					var selectIsEmpty = (selectMulti.children("option").length == 0);
					if(selectIsEmpty)
						selectSingle.children("option").appendTo(selectMulti);
					else
					{
						for(var i = 0; i < selItems.length; ++i)
						{
							var selValue = selItems[i];
							var option = selectMulti.find("[value=" + selValue + "]");
							if(inOrder)
							{
								var valPrev = option.attr("data-prev");
								var valNext = option.attr("data-next");
								var prevOption = selectSingle.children("[value= " + valPrev + "]");
								var nextOption = selectSingle.children("[value= " + valNext + "]");
								if(prevOption.length)
									prevOption.after(option);
								else
								if(nextOption.length)
									nextOption.before(option);
								else
									selectSingle.append(option);
							}
							else
								selectSingle.append(option);
						}
					}
				});
			});
		</script>
		<style type="text/css">
			select, button
			{
				margin:20px;
				width:150px;
			}
			.btn-in-order
			{
				display:block;
			}
		</style>
	</head>
	<body tabindex="0" class="ibx-root">
		<select class="select-multi" multiple="true">
			<option value="v1"data-next="v2">One</option>
			<option value="v2" data-prev="v1" data-next="v3">Two</option>
			<option value="v3" data-prev="v2" data-next="v4">Three</option>
			<option value="v4" data-prev="v3" data-next="v5">Four</option>
			<option value="v5" data-prev="v4">Five</option>
		</select>
		<input type="checkbox" class="btn-in-order">Preserve Item Order</input>
		<button class="btn-move">Move Option</button>
		<select class="select-single">
		</select>
	</body>
</html>


