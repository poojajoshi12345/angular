<!DOCTYPE html>
<html lang="en">
	<head>
		<title>HTML Test File</title>
		<meta http-equiv="X-UA-Compatible" content="IE=11">
		<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
		<meta http-equiv="Pragma" content="no-cache" />
		<meta http-equiv="Expires" content="0" />
		<meta name="google" value="notranslate">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<script type="text/javascript" src="../../resources/ibx.js"></script>
		<script type="text/javascript">
			ibx(function(e)
			{
				$(".test-button").on("click", function(e)
				{
					var waiting = ibx.waitStart();
					waiting.on("ibx_waiting", function(e)
					{
						var waiting = $(e.target);
						var btn = waiting.data("btnAbort");
						var startDate = waiting.ibxWidget("startDate");
						var curDate = new Date();
						if(!btn && ((curDate - startDate) > 1000))
						{
							btn = $("<div class='abort-button'>Abort This Action...</div>").ibxButtonSimple();
							btn.on("click", function(waiting, e)
							{
								ibx.waitStop();
							}.bind(this, waiting));

							waiting.ibxWidget("add", btn);
							waiting.data("btnAbort", btn);
						}
					});
				})
			},true);
		</script>
		<style type="text/css">
			body
			{
				margin:0px;
				position:absolute;
				width:100%;
				height:100%;
				box-sizing:border-box;
			}
			.abort-button
			{
				margin:5px;
				padding:5px;
				font-size:2em;
				border:2px solid red;
				border-radius:.25em;
			}

		</style>
	</head>
	<body class="ibx-root">
		<div class="test-button" data-ibx-type="ibxButton">Start</div>
	</body>
</html>


